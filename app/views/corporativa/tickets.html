<style type="text/css">
  .scrollDiv {
    height: 450px;
    overflow: auto;
    overflow-x: hidden;
  }
</style>
<div class="card animated fadeIn" style="margin-top:20px;">
  <div class="card-head style-default-light" style="padding-top:10px; padding-left:10px;">
    <header>
      <strong style="font-weight:bold; border:none; margin-left:10px; font-size: 16px;">Cancelación y Reimpresión de
        Facturas</strong>
      <br /><small class="text-muted" style="font-size:14px; margin-left:10px;"><i class="fa fa-home" aria-hidden="true"></i>
        Facturación Corporativa>Facturas</small>

    </header>
    <div class="tools">
        <button ng-show="false" class="btn btn-success btn-sm" type="button" id="descarga" csv-column-order="$ctrl.csvorder"  
          csv-header="$ctrl.csvheader"
          ng-csv="$ctrl.TicketsDescarga" filename="ListadoFacturas.csv" field-separator="," decimal-separator="."  add-bom="true"></button>
      </div>
  </div>

  <div class="card-body">
    <div class="panel-group" id="accordion3">
      <div class="card panel">
        <div class="card-head card-head-xs style-primary-light collapsed" data-toggle="collapse" data-parent="#accordion3"
          data-target="#accordion3-1" aria-expanded="false">
          <header><i class="fa fa-search"></i> Buscar factura</header>
          <div class="tools">
            <a class="btn btn-icon-toggle"><i class="fa fa-angle-down"></i></a>
          </div>
        </div>
        <div id="accordion3-1" class="collapse buscarContrato" aria-expanded="false" style="height: 0px;">
          <div class="panel-body">

            <div class="row">
              <br />
              <div class="col-md-2">


                <input type="text" class="form-control input-sm" placeholder="Serie y Folio" ng-model="$ctrl.folio">


              </div>
              <div class="col-md-1">

                <button class="btn btn-info btn-xs" ng-click="$ctrl.Buscar(2);"><i class="fa fa-search"></i> Buscar</button>
              </div>

              <div class="col-md-1">

                <input type="number" placeholder="Contrato" class="form-control input-sm" ng-model="$ctrl.contrato">
              </div>
              <div class="col-md-1">

                <button class="btn btn-info btn-xs" ng-click="$ctrl.Buscar(3);"><i class="fa fa-search"></i> Buscar</button>
              </div>

              <div class="col-md-2">
                <input type="text" class="form-control input-sm" placeholder="nombre" ng-model="$ctrl.cliente">
              </div>
              <div class="col-md-1">

                <button class="btn btn-info btn-xs" ng-click="$ctrl.Buscar(4);"><i class="fa fa-search"></i> Buscar</button>
              </div>
              <div class="col-md-2">
                <input type="date" class="form-control input-sm" ng-model="$ctrl.fecha">
              </div>
              <div class="col-md-1">
                <button class="btn btn-info btn-xs" ng-click="$ctrl.Buscar(1);"><i class="fa fa-search"></i> Buscar</button>

              </div>
            </div>
          </div>
        </div>
        <!-- panel body -->
      </div>
    </div>
    <!--end .panel -->
  </div>



  <div class="col-md-12 table-responsive">

    <table class="table" style="font-size:13px;">
      <thead>
        <tr>
          <th>Contrato Maestro</th>
          <th>Factura</th>
          <th>Ticket</th>
          <th>Status</th>
          <th>Fecha</th>
          <th>Importe</th>
          <th>Moneda</th>
          <th>Nombre comercial</th>
          <th>Pagos</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>

        <tr dir-paginate="x in $ctrl.Tickets|orderBy:$ctrl.sortKey:reverse|filter:$ctrl.search|itemsPerPage:8">
          <td>{{x.ContratoMaestro}}</td>
          <td>{{x.Factura}}</td>
          <td>{{x.Ticket}}</td>
          <td>{{x.Status}}</td>
          <td>{{x.Fecha}}</td>
          <td>{{x.Importe | currency}}</td>
          <td>{{x.Moneda}}</td>
          <td>{{x.Cliente}}</td>
          <td>
            <button class="btn ink-reaction ink-reaction btn-flat btn-xs btn-info" ng-click="$ctrl.historial(x);"><i
                class="fa fa-plus"></i> Pagos</button>
          </td>
          <td>
            <button class="btn ink-reaction  btn-xs btn-default-bright" ng-click="$ctrl.opcionTicket(1,x);"><i class="fa fa-print"></i>
              Imprimir</button>
            <button class="btn ink-reaction  btn-xs btn-default-bright" ng-click="$ctrl.opcionTicket(3,x);"><i class="fa fa-envelope-o"></i>
              Enviar</button>
            <button class="btn ink-reaction btn-xs btn-danger" ng-if="x.Status!='Cancelada'" ng-click="$ctrl.opcionTicket(2,x)"><i
                class="fa fa-ban"></i> Cancelar</button>
            <button class="btn ink-reaction btn-xs btn-info" ng-click="$ctrl.DescargarPDF(x)"><i class="fa fa-file-pdf-o"></i>
              PDF</button>
            <button class="btn ink-reaction btn-xs btn-warning" ng-click="$ctrl.DescargarXML(x)"><i class="fa fa-file-code-o"></i>
              XML</button>
          </td>
        </tr>
      </tbody>
    </table>
    <div style="padding-left: 20px;">
      <dir-pagination-controls max-size="5" direction-links="true" boundary-links="true">
      </dir-pagination-controls>
    </div>
  </div>
  <div class="col-md-12">
      <div class="card panel col-md-offset-6 col-md-6" >
        <div class="card-head card-head-xs style-primary-light">
          <header>
            <i class="fa fa-file-excel-o"></i> Exportar Listado Facturas</header>
        </div>
        <div class="panel-body">
          <div class="row">
            <div class="col-md-4">
              <p>Fecha Inicial:</p>
              <input type="date" class="form-control input-sm" ng-model="$ctrl.FechaInicial">
            </div>
            <div class="col-md-4">
              <p>Fecha Final:</p>
              <input type="date" class="form-control input-sm" ng-model="$ctrl.FechaFinal">
            </div>
            <div class="col-md-2">
              <br>
              <button class="btn btn-success btn-sm" type="button" ng-click="$ctrl.Exportar();">
                <i class="fa fa-file-excel-o" aria-hidden="true"></i> Descargar Listado
              </button>
            </div>
          </div>
        </div>

      </div>
    </div>
</div>
</div>