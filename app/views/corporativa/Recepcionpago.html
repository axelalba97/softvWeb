<style>
  /*.table > thead > tr > th, .table > tbody > tr > th, .table > tfoot > tr > th, .table > thead > tr > td, .table > tbody > tr > td, .table > tfoot > tr > td {
    padding: 8px 8px;
    line-height: 1.846153846;
    vertical-align: top;
    border-top: 1px solid rgba(189, 193, 193, 0.2);
}*/

  .scrollDiv {
    height: 420px;
    overflow: auto;
    overflow-x: hidden;
  }

  .scrollDiv2 {
    height: 200px;
    overflow: auto;
    overflow-x: hidden;
  }

</style>

<div class="row animated fadeIn fast" style="margin-top:10px;">

  <div class="card" style="margin-top:20px;">
    <div class="card-head style-default-light" style="padding-top:10px; padding-left:10px;">
      <header>
        <strong style="font-weight:bold; border:none; margin-left:10px; font-size: 16px;">Recepción de pagos</strong>
        <br />
        <small class="text-muted" style="font-size:14px; margin-left:10px;">
          <i class="fa fa-home" aria-hidden="true"></i> Facturación Corporativa>Recepción de pagos</small>
      </header>
    </div>

    <div class="card-body">
      <div class="panel-group" id="accordion3">
        <div class="card panel">
          <div class="card-head card-head-xs style-primary-light collapsed" data-toggle="collapse" data-parent="#accordion3" data-target="#accordion3-1"
            aria-expanded="false">
            <header>
              <i class="fa fa-search"></i> Buscar contrato</header>
            <div class="tools">
              <a class="btn btn-icon-toggle">
                <i class="fa fa-angle-down"></i>
              </a>
            </div>
          </div>
          <div id="accordion3-1" class="collapse buscarContrato" aria-expanded="false" style="height: 0px;">
            <div class="panel-body">
              <div class="row">
                <div class="col-md-1">
                  <p>Contrato</p>
                  <input type="text" class="form-control input-sm" ng-model="$ctrl.ContratoMaestro" ng-keypress="$ctrl.enterContrato($event, 3)">

                </div>
                <div class="col-md-1">
                  <br>
                  <button class="btn btn-info btn-xs" ng-click="$ctrl.buscaContrato(3)">Buscar</button>
                </div>
                <div class="col-md-1">
                  <p>Factura</p>
                  <input type="text" ng-model="$ctrl.Ticket" class="form-control input-sm" ng-keypress="$ctrl.enterContrato($event, 2)">

                </div>
                <div class="col-md-1">
                  <br>
                  <button class="btn btn-info btn-xs" ng-click="$ctrl.buscaContrato(2)">Buscar</button>
                </div>
                <div class="col-md-2">
                  <p>Nombre Comercial</p>
                  <input type="text" class="form-control input-sm " ng-model="$ctrl.Cliente" ng-keypress="$ctrl.enterContrato($event, 4)">

                </div>
                <div class="col-md-1">
                  </br>
                  <button class="btn btn-info btn-xs" ng-click="$ctrl.buscaContrato(4)">Buscar</button>
                </div>
                <div class="col-md-2">
                  <p>Fecha de Facturación</p>
                  <input type="date" ng-model="$ctrl.Fecha" class="form-control input-sm" ng-keypress="$ctrl.enterContrato($event, 1)">

                </div>
                <div class="col-md-1">
                  <br>
                  <button class="btn btn-info btn-xs" ng-click="$ctrl.buscaContrato(1)">Buscar</button>
                </div>
                <br>
                <div class="col-md-2">
                  <div>
                    <div class="col-md-12">
                      <label class="radio-inline radio-styled">
                        <input type="radio" name="inlineRadioOptions" ng-value="1" ng-model="$ctrl.pendientes" ng-change="$ctrl.saldadas()">
                        <span>Todas</span>
                      </label>
                    </div>
                    <br/>
                    <div class="col-md-12">
                      <label class="radio-inline radio-styled">
                        <input type="radio" name="inlineRadioOptions" ng-value="2" ng-model="$ctrl.pendientes" ng-change="$ctrl.saldadas()">
                        <span>Saldadas</span>
                      </label>
                    </div>
                    <br/>
                    <div class="col-md-12">
                      <label class="radio-inline radio-styled">
                        <input type="radio" name="inlineRadioOptions" ng-value="3" ng-model="$ctrl.pendientes" ng-change="$ctrl.saldadas()">
                        <span>Pendientes</span>
                      </label>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!-- panel body -->
          </div>
        </div>
        <!--end .panel -->
      </div>


      <div class="tabbable">
        <!-- Only required for left/right tabs -->
        <!--<ul class="nav nav-tabs">
         <li class="active"><a href="" data-target="#tab1" data-toggle="tab">Una Sola Tabla</a></li>
          <li class="active"><a href="" data-target="#tab2" data-toggle="tab">Tres Tablas</a></li>
        </ul>-->
        <!--  <div class="tab-content">-->

        <!--<div class="tab-pane active" id="tab1">
            <div class="row">
              <div class="col-md-12" style="font-size:10px;">
                <h4 class="text-center">Facturas Originales</h4>
                <div class="row scrollDiv">
                  <table class="table table-striped table-hover table-condensed">
                    <thead>
                      <tr>
                        <th>Contrato maestro</th>
                        <th>Factura</th>
                        <th>Nombre Comercial</th>
                        <th>Tipo</th>
                        <th>Fecha de Facturación</th>
                        <th>Importe</th>
                        <th>Total Abonado</th>
                        <th>Saldo Pendiente</th>
                        <th>Status</th>
                        <th>Opciones</th>
                        <th></th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr ng-show="$ctrl.pagos.length>0" ng-repeat-start="x in $ctrl.pagos">
                        <td>{{x.ContratoMaestro}}</td>
                        <td>{{x.Ticket}}</td>
                        <td>{{x.Cliente}}</td>
                        <td>{{x.Tipo}}</td>
                        <td>{{x.Fecha}}</td>
                        <td>{{x.Importe | currency}}</td>
                        <td>{{x.TotalAbonado | currency}}</td>
                        <td>{{x.Importe - x.TotalAbonado | currency}}</td>
                        <td>{{x.Status}}</td>
                        <td>
                          <button class="btn ink-reaction btn-floating-action btn-xs btn-success" ng-disabled="$ctrl.pagar" ng-click="$ctrl.PagarCredito(x)"
                            data-toggle="tooltip" data-placement="top" title="Pagar" data-original-title="Pagar"><i class="fa fa-credit-card"></i></button>
                          <button class="btn ink-reaction btn-floating-action btn-xs btn-warning" ng-disabled="$ctrl.generar" ng-click="$ctrl.detalle(x)"
                            data-toggle="tooltip" data-placement="top" title="Ver Detalle" data-original-title="Ver Detalle"><i class="fa fa-list-ul"></i></button>
                         
                        </td>
                        <td>
                        
                          <button ng-if="x.expanded" class="btn ink-reaction btn-xs btn-icon-toggle btn-primary" ng-click="x.expanded = false;"><i class="fa fa-angle-down" aria-hidden="true"></i></button>
                          <button ng-if="!x.expanded" class="btn ink-reaction btn-xs btn-icon-toggle btn-primary" ng-click="x.expanded = true; "><i class="fa fa-angle-left" aria-hidden="true"></i></button>
                        </td>
                      </tr>
                      <tr ng-if="x.expanded" ng-repeat-end="">
                        <td colspan="10">
                          <div class="row">
                            <h5 class="text-center">Facturas Referenciadas</h5>
                            <div class="col-md-12 scrollDiv2" style="padding: 15px;">
                              <table class="table ">
                                <thead style="background-color: #caf0ee;">
                                  <tr>
                                    <th>Factura</th>
                                    <th>Sucursal</th>
                                    <th>Cajera</th>
                                    <th>Medio Pago</th>
                                    <th>Importe</th>
                                    <th>Fecha</th>
                                    <th>Status</th>
                                    <th></th>
                                    <th></th>
                                  </tr>
                                </thead>
                                <tbody>
                                  <tr ng-repeat-start="z in x.Historial">
                                    <td>{{z.Clv_Pago}}</td>
                                    <td>{{z.Sucursal}}</td>
                                    <td>{{z.Cajera}} </td>
                                    <td>{{z.MedioPago}}</td>
                                    <td>{{z.Importe | currency}}</td>
                                    <td>{{z.Hora}}</td>
                                     <td>{{z.StatusPago}}</td>

                                    <td>
                                     
                                      <button ng-if="z.expanded2" class="btn ink-reaction btn-xs btn-icon-toggle btn-primary" ng-click="z.expanded2 = false;"><i class="fa fa-angle-left" aria-hidden="true"></i></button>
                                      <button ng-if="!z.expanded2" class=" btn ink-reaction btn-xs btn-icon-toggle btn-primary" ng-click="z.expanded2 = true; "><i class="fa fa-angle-down" aria-hidden="true"></i></button>
                                    </td>
                                    <td ng-if="z.StatusPago=='Activa'">
                                            <button  class="btn ink-reaction btn-icon-toggle btn-xs  btn-danger" ng-click="$ctrl.cancelarfactura(z)" data-toggle="tooltip" data-placement="top" title="cancelar factura" data-original-title="cancelar"><i class="fa fa-trash"></i></button>
                                        </td>
                                        <td ng-if="z.StatusPago!='Activa'"></td>

                                  </tr>
                                  <tr ng-if="z.expanded2" ng-repeat-end="">
                                    <td colspan="7">
                                      <h5 class="text-center">Contratos Aplicados</h5>
                                      <table class="table table-striped table-hover table-condensed">
                                        <thead style="background-color: beige; font-style: italic;">
                                          <tr>
                                            <th>Contrato</th>
                                            <th>Importe</th>
                                            <th>Saldo Pendiente</th>
                                            <th>Monto</th>
                                            <th>Saldado</th>
                                          </tr>
                                        </thead>
                                        <tbody>
                                          <tr ng-repeat="y in z.contratos">
                                            <td>{{y.Contrato}}</td>
                                            <td>{{y.Importe | currency}}</td>
                                            <td>{{y.PorPagar | currency}} </td>
                                            <td>{{y.Monto | currency}}</td>                                           
                                            <td>
                                            
                                              <input type="checkbox" name="" ng-checked="{{y.Saldada}}" ng-disabled="true"><br></td>
                                          </tr>
                                        </tbody>
                                      </table>

                                    </td>
                                  </tr>
                                </tbody>
                              </table>
                            </div>
                          </div>



                        </td>
                      </tr>

                    </tbody>
                  </table>-->
        <!--<div style="padding-left: 20px;">
              <dir-pagination-controls max-size="5" direction-links="true" boundary-links="true">
            </dir-pagination-controls>
            </div>
                </div>
              </div>


            </div>
          </div>-->




        <!--  <div class="tab-pane" id="tab2">-->
        <div class="row">
          <div class="col-md-7 table-responsive" style="font-size:10px;">
            <h4 class="text-center">Facturas Originales</h4>
            <div class="row ">
              <table class="table table-striped table-hover table-condensed">
                <thead>
                  <tr>
                    <th>Contrato<br>maestro</th>
                    <th>Ticket</th>
                    <th>Factura</th>
                    <th>Nombre Comercial</th>
                    <th>Tipo</th>
                    <th>Fecha de <br> Facturación</th>
                    <th>Importe</th>
                    <th>Total Abonado</th>
                    <th>Total Nota de Crédito</th>
                    <th>Saldo Pendiente</th>
                    <th>Status</th>
                    <th></th>
                    <th></th>
                    <th></th>
                  </tr>
                </thead>
                <tbody>
                  <tr ng-show="$ctrl.pagos.length>0" dir-paginate="x in $ctrl.pagos|orderBy:$ctrl.sortKey:reverse|filter:$ctrl.search|itemsPerPage:12">
                    <td>{{x.ContratoMaestro}}</td>
                    <td>{{x.Ticket}}</td>
                    <td>{{x.Factura}}</td>
                    <td>{{x.Cliente}}</td>
                    <td>{{x.Tipo}}</td>
                    <td>{{x.Fecha}}</td>
                    <td>{{x.Importe | currency}}</td>
                    <td>{{x.TotalAbonado | currency}}</td>
                    <td>{{x.TotalNotas | currency}}</td>
                    <td>{{x.Importe - x.TotalAbonado - x.TotalNotas | currency}}</td>
                    <td>{{x.Status}}</td>
                    <td>
                      <button ng-if="x.Status=='Activa'" class="btn ink-reaction btn-icon-toggle btn-xs  btn-success" ng-disabled="$ctrl.pagar"
                        ng-click="$ctrl.PagarCredito(x)" data-toggle="tooltip" data-placement="top" title="Pagar" data-original-title="Pagar">
                        <i class="fa fa-credit-card"></i>
                      </button>
                    </td>
                    <td>
                      <button class="btn ink-reaction btn-icon-toggle btn-xs  btn-warning" ng-disabled="$ctrl.generar" ng-click="$ctrl.detalle(x)"
                        data-toggle="tooltip" data-placement="top" title="Ver Detalle" data-original-title="Ver Detalle">
                        <i class="fa fa-list-ul"></i>
                      </button>
                    </td>
                    <td>
                      <button class="btn ink-reaction btn-icon-toggle btn-xs  btn-danger" ng-click="$ctrl.historial(x)" data-toggle="tooltip" data-placement="top"
                        title="Ver Historial" data-original-title="Ver Historial">
                        <i class="fa fa-plus"></i>
                      </button>
                    </td>
                  </tr>
                </tbody>
              </table>
              <div style="padding-left: 20px;">
                <dir-pagination-controls max-size="5" direction-links="true" boundary-links="true">
                </dir-pagination-controls>
              </div>
            </div>
          </div>

          <div class="col-md-5 table-responsive" style="font-size:10px;">
            <br>
            <h4 class="text-center">Facturas Referenciadas</h4>
            <div class="row">
              <div class="col-md-12 scrollDiv2 card wrapper">
                <table class="table table-striped table-hover table-condensed">
                  <thead>
                    <tr>
                      <th>Factura</th>
                      <th>Sucursal</th>
                      <th>Cajera</th>
                      <th>Medio Pago</th>
                      <th>Importe</th>
                      <th>Fecha</th>
                      <th>Status</th>
                      <th>Opción</th>
                      <th></th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr ng-repeat="z in $ctrl.historialPagos">
                      <td>{{z.Clv_Pago}}</td>
                      <td>{{z.Sucursal}}</td>
                      <td>{{z.Cajera}} </td>
                      <td>{{z.MedioPago}}</td>
                      <td>{{z.Importe | currency}}</td>


                      <td>{{z.Hora}}</td>
                      <td>{{z.StatusPago}}</td>
                      <td>
                        <button class="btn ink-reaction btn-icon-toggle btn-xs btn-success" ng-click="$ctrl.verFactura(z.Clv_Pago,z.MedioPago)" data-toggle="tooltip"
                          data-placement="top" title="Ver Facturas" data-original-title="Ver Detalle">
                          <i class="fa fa-plus"></i>
                        </button>
                      </td>
                      <td ng-if="z.StatusPago=='Activa'">
                       <!--  <button class="btn ink-reaction btn-icon-toggle btn-xs  btn-danger" ng-click="$ctrl.cancelarfactura(z)" data-toggle="tooltip"
                          data-placement="top" title="cancelar factura" data-original-title="cancelar">
                          <i class="fa fa-trash"></i>
                        </button> -->
                      </td>
                      <td ng-if="z.StatusPago!='Activa'"></td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>

            <div class="row">
              <h4 class="text-center">Contratos Aplicados</h4>
              <div class="col-md-12 scrollDiv2 card wrapper table-responsive">
                <table class="table table-striped table-hover table-condensed">
                  <thead>
                    <tr>
                      <th>Contrato</th>
                      <th>Importe</th>
                      <th>Saldo Pendiente</th>
                      <th>Monto</th>
                      <th>Saldado</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr ng-repeat="y in $ctrl.facturas">
                      <td>{{y.Contrato}}</td>
                      <td>{{y.Importe | currency}}</td>
                      <td>{{y.PorPagar | currency}} </td>
                      <td>{{y.Monto | currency}}</td>

                      <td>
                        <input type="checkbox" name="" ng-checked="{{y.Saldada}}" ng-disabled="true">
                        <br>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
        <!-- </div>-->
        <!-- </div>-->
      </div>




    </div>

  </div>
</div>
